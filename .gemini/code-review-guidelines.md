# Gemini CLI Code Review Configuration

このファイルは、Gemini CLI を使用した対話的コードレビューの具体的な指針を提供します。

## Gemini CLI レビューの特徴

### 1. 多角的分析能力
Gemini の強力な推論能力を活かした包括的なレビュー：

```markdown
## 多層レビューアプローチ
- **コード理解**: 実装の目的と手法の妥当性評価
- **影響分析**: 変更がシステム全体に与える影響の予測
- **品質評価**: 複数の品質軸での定量的・定性的評価
- **改善提案**: 短期・中期・長期の改善ロードマップ提示
```

### 2. 対話的探索プロセス
段階的な質問と深掘りによる詳細分析：

```markdown
## 探索的レビュー手順
1. **概要理解**: "この変更の主な目的は何ですか？"
2. **詳細分析**: "この実装手法を選んだ理由は？"
3. **代替案検討**: "他にどのような実装方法が考えられますか？"
4. **リスク評価**: "この変更に伴うリスクは何ですか？"
5. **最適化提案**: "さらに改善できる点はありますか？"
```

### 3. 学習・説明重視
技術的な判断の根拠を明確に説明し、チーム全体の理解向上に貢献：

```markdown
## 説明型レビューの価値
- **技術的判断の根拠**: なぜその手法が最適かの論理的説明
- **トレードオフの明示**: 各選択肢の利点・欠点の比較
- **学習機会の提供**: より良いプラクティスの紹介
- **チーム知識の蓄積**: レビューから得られた知見の文書化
```

## Gemini 特有のレビューポイント

### 1. 創造的問題解決の評価
```markdown
## 革新性評価基準
- **独創性**: 従来手法からの改善・革新度
- **実用性**: 実際の問題解決への効果
- **拡張性**: 将来的な発展・応用可能性
- **学習価値**: チーム全体への知識貢献度
```

### 2. 複雑な依存関係の分析
Gemini の高い文脈理解能力を活用：

```markdown
## 依存関係分析項目
- **直接依存**: 明示的な import/require 関係
- **間接依存**: データフロー、イベント連鎖
- **時間的依存**: 実行順序、タイミング制約
- **外部依存**: API、データベース、外部サービス
```

### 3. パフォーマンス・スケーラビリティ分析
```markdown
## 性能評価アプローチ
- **理論的分析**: 計算量、メモリ使用量の理論値
- **実測予測**: 実際の負荷での性能予測
- **ボトルネック特定**: 性能制約となりうる箇所の識別
- **改善戦略**: 段階的な性能向上プラン
```

## 実践的なレビューワークフロー

### Stage 1: 初期理解と全体像把握
```markdown
## 導入質問例
1. "このPRの背景と解決したい問題は何ですか？"
2. "なぜこの実装手法を選択したのですか？"
3. "この変更が既存システムに与える影響は？"
4. "期待される効果・改善は何ですか？"
```

### Stage 2: 詳細技術分析
```markdown
## 技術詳細の探索
1. **アルゴリズム評価**
   - 選択したアルゴリズムの適切性
   - 時間・空間計算量の妥当性
   - 代替アルゴリズムとの比較

2. **データ構造設計**
   - データモデルの正規化度
   - インデックス設計の最適性
   - メモリ効率性

3. **API設計品質**
   - インターフェースの直感性
   - 拡張性・後方互換性
   - エラーハンドリング設計
```

### Stage 3: 品質・保守性評価
```markdown
## 品質軸別評価
1. **可読性**: コードの理解しやすさ
2. **保守性**: 将来の変更・拡張の容易さ
3. **テスタビリティ**: テスト作成・実行の容易さ
4. **再利用性**: 他の部分での活用可能性
5. **ドキュメント性**: 自己説明的コードの度合い
```

### Stage 4: リスク・セキュリティ分析
```markdown
## リスク評価項目
1. **セキュリティリスク**
   - 脆弱性の可能性
   - 攻撃面の拡大
   - データ保護の適切性

2. **運用リスク**
   - 障害発生時の影響範囲
   - 復旧手順の明確性
   - モニタリング・ログ設計

3. **技術的リスク**
   - 技術的負債の増加
   - 依存関係の複雑化
   - 性能劣化の可能性
```

## Gemini 推奨レビューテンプレート

```markdown
# Gemini CLI Code Review Report

## 🎯 レビュー目的と範囲
- **対象**: [PR番号・機能名]
- **レビュー範囲**: [技術・品質・リスクの観点]
- **レビュー深度**: [表面的 / 詳細 / 包括的]

## 🧠 理解と分析

### 📋 実装理解
**Q**: この実装の核心的なアイデアは何ですか？
**A**: [実装の本質的価値と革新性]

**Q**: なぜこの手法が最適だと判断されましたか？
**A**: [技術的判断の根拠と代替案との比較]

### 🔍 技術詳細分析
| 評価項目 | 評価 | コメント |
|----------|------|----------|
| アルゴリズム選択 | ⭐⭐⭐⭐⭐ | [具体的評価] |
| データ構造設計 | ⭐⭐⭐⭐☆ | [改善提案含む] |
| エラーハンドリング | ⭐⭐⭐☆☆ | [不足している部分] |
| パフォーマンス | ⭐⭐⭐⭐☆ | [最適化の余地] |
| テスタビリティ | ⭐⭐⭐⭐⭐ | [優れている点] |

## 💡 洞察と提案

### 🎉 優れている点
1. **[技術的革新]**: [具体的な優れた実装]
2. **[設計品質]**: [優れた設計判断]
3. **[将来性]**: [拡張性・保守性の良さ]

### ⚠️ 改善提案
#### 高優先度
- **[セキュリティ]**: [具体的な問題と対策]
- **[性能]**: [ボトルネックと改善案]

#### 中優先度  
- **[保守性]**: [より良い構造への提案]
- **[可読性]**: [コード理解向上の提案]

#### 低優先度
- **[最適化]**: [さらなる効率化の提案]
- **[拡張性]**: [将来的な機能追加への準備]

## 🔮 将来への影響分析

### 短期的影響（1-3ヶ月）
- [開発効率・バグ率・性能への影響]

### 中期的影響（3-12ヶ月）
- [アーキテクチャ・技術選択への影響]

### 長期的影響（1年以上）
- [技術戦略・チーム能力への影響]

## 🛠️ 実行可能な次ステップ

### 今すぐ対応
1. [最優先で修正すべき項目]
2. [安全性に関わる重要事項]

### 近日中に対応
1. [品質向上のための改善]
2. [性能最適化の実施]

### 将来的に検討
1. [より良いアーキテクチャへの発展]
2. [新技術の活用可能性]

## 📚 学習・共有価値

### チームへの知識貢献
- [この実装から学べる技術的知見]
- [他の部分でも活用できるパターン]
- [避けるべきアンチパターンの教訓]

### 参考資料・ベストプラクティス
- [関連する技術文書・記事]
- [類似実装の成功事例]
- [推奨するさらなる学習リソース]
```

## 高度な分析手法

### 1. 仮説検証型レビュー
```markdown
## 仮説設定と検証
1. **仮説**: "この実装は性能要件を満たす"
2. **検証方法**: [具体的な測定・テスト手法]
3. **検証結果**: [データに基づく評価]
4. **結論**: [仮説の採択・棄却と根拠]
```

### 2. シナリオベース評価
```markdown
## 様々なシナリオでの動作評価
- **正常系**: 期待される使用パターンでの動作
- **異常系**: エラー・例外発生時の対応
- **負荷系**: 高負荷・大量データでの性能
- **セキュリティ系**: 悪意のある入力への対応
```

### 3. 進化可能性分析
```markdown
## 将来の変化への適応性
- **要件変更**: 仕様変更に対する柔軟性
- **技術進歩**: 新技術導入時の移行容易性
- **スケール変化**: 利用規模拡大への対応
- **環境変化**: 実行環境変更への対応
```

## 継続的改善のためのメトリクス

### レビュー品質指標
```markdown
- **発見問題数**: Critical/High/Medium/Low 別
- **改善提案採用率**: 提案の実際の採用状況
- **予測精度**: 指摘した問題の実際の発生率
- **レビュー効率**: レビュー時間と品質のバランス
```

### 長期的価値測定
```markdown
- **技術的負債削減**: レビューによる品質向上効果
- **チーム知識向上**: レビューから得られた学習効果
- **開発効率改善**: より良いプラクティスの普及効果
- **品質向上**: バグ減少・性能改善の定量的効果
```

このガイドラインに従うことで、Gemini CLI は深い洞察と実用的な改善提案を提供する高品質なコードレビューを実現できます。