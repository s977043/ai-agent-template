# Claude Code Review Configuration

このファイルは、Claude Code が仕様書駆動開発（SDD）におけるコードレビューを実行する際の具体的な指針を提供します。

## 仕様書駆動レビューの重点項目

### 1. 仕様書との整合性（最重要）
Claude Code は `/kiro:` コマンド群を使用した仕様書作成プロセスを重視するため、以下を厳格にチェック：

```markdown
## 仕様書整合性チェックリスト
- [ ] `steering/product-steering.md` のビジョンと一致している
- [ ] `specs/*/requirements.md` の要件を満たしている  
- [ ] `specs/*/design.md` の設計仕様に従っている
- [ ] `specs/*/tasks.md` のタスク分割が適切に実装されている
- [ ] 受け入れ基準（Acceptance Criteria）がすべて充足されている
```

### 2. スラッシュコマンドによる段階的開発の確認
Claude Code の `/kiro:` コマンドワークフローに沿った開発が行われているかを検証：

```markdown
## 開発プロセス確認
- [ ] `/kiro:steering` → ビジョン定義の反映
- [ ] `/kiro:spec-init` → 仕様初期化の完了
- [ ] `/kiro:spec-requirements` → 要件定義の網羅
- [ ] `/kiro:spec-design` → 設計の詳細化
- [ ] `/kiro:spec-tasks` → タスク実装の完了
```

### 3. 段階的実装の品質評価
各ステージでの実装品質を個別に評価：

#### Stage別評価基準
```markdown
### Stage 1: 基盤実装
- 最小限のMVPが動作するか
- 基本的なテストが通るか
- 次のステージへの拡張性があるか

### Stage 2: 機能拡張  
- 主要ユースケースがカバーされているか
- エラーハンドリングが適切か
- パフォーマンスが許容範囲か

### Stage 3: 完成・最適化
- すべての受け入れ基準を満たしているか
- ドキュメントが完備されているか
- 本番環境への準備が整っているか
```

## Claude固有のレビューポイント

### 1. 文脈理解の活用
Claude の長い文脈理解能力を活かしたレビュー：

- **大きな変更の影響範囲分析**: ファイル間の依存関係を包括的に評価
- **設計一貫性の検証**: アーキテクチャパターンが全体を通して統一されているか
- **リファクタリング提案**: より良い構造への改善案を具体的に提示

### 2. 仕様書の自動更新チェック
コード変更に伴う仕様書の更新が適切に行われているかを確認：

```markdown
## 仕様書更新確認
- [ ] 新機能追加時: requirements.md に記載されているか
- [ ] 設計変更時: design.md が更新されているか  
- [ ] API変更時: インターフェース仕様が最新か
- [ ] タスク完了時: tasks.md のステータスが更新されているか
```

### 3. 高品質なコメント・提案の生成
Claude の自然言語能力を活かした詳細なレビューコメント：

```markdown
## レビューコメントの品質基準
- 問題の**根本原因**を特定する
- **具体的な改善コード例**を提示する
- **代替実装手法**とそのトレードオフを説明する
- **将来の拡張性**への影響を考慮する
- **チーム内の知識共有**につながる解説を含む
```

## 実践的なレビューワークフロー

### Step 1: 事前分析
```markdown
1. 関連する仕様書をすべて読み込む
2. 変更の背景と目的を理解する  
3. 影響範囲を特定する（依存ファイル、外部API等）
4. 既存のテストケースを確認する
```

### Step 2: 段階的レビュー実行
```markdown
1. **構造レビュー**: ファイル配置、命名規則、モジュール分割
2. **ロジックレビュー**: アルゴリズム、データフロー、エラーハンドリング  
3. **品質レビュー**: 可読性、保守性、テスタビリティ
4. **統合レビュー**: 既存システムとの整合性、パフォーマンス影響
```

### Step 3: フィードバック生成
```markdown
1. **優先度別問題整理**: Critical → High → Medium → Low
2. **改善提案の具体化**: コード例と実装手順を含む
3. **学習機会の提供**: なぜその方法が良いかの解説
4. **次ステップの明確化**: 修正後の確認ポイント
```

## クライデ推奨レビューテンプレート

```markdown
# Claude Code Review Report

## 📊 レビューサマリー
- **プルリクエスト**: [PR番号とタイトル]
- **関連仕様書**: [steering/, specs/ の該当ファイル]
- **実装ステージ**: [Stage 1/2/3]
- **総合評価**: [Approve/Request Changes/Comment]

## 🎯 仕様書整合性評価
### ✅ 仕様に準拠している点
- [具体的な準拠箇所を列挙]

### ⚠️ 仕様からの逸脱・不足
- [問題箇所と修正提案]

## 🏗️ アーキテクチャ・設計レビュー
### 設計原則の遵守状況
- **単一責任の原則**: [評価とコメント]
- **依存性逆転の原則**: [評価とコメント]  
- **開放閉鎖の原則**: [評価とコメント]

### 改善提案
```diff
// 現在の実装
- function processData(data) { /* 複雑なロジック */ }

// 提案する改善
+ function processData(data) {
+   return validateData(data)
+     .then(transformData)
+     .then(saveData);
+ }
```

## 🧪 テスト品質評価
- **カバレッジ**: [数値と評価]
- **テストケースの網羅性**: [評価]
- **テストの可読性**: [評価]

## 📈 パフォーマンス・セキュリティ
- **パフォーマンス懸念**: [具体的な問題と対策]
- **セキュリティリスク**: [リスクレベルと対策]

## 🔄 次のアクション
1. [最優先で対応すべき項目]
2. [中優先度の改善項目]  
3. [将来的な拡張・最適化項目]

## 💡 学習ポイント
[チーム全体の知識向上につながる技術的な洞察]
```

## 継続的改善のための指標

### レビュー効果測定
- **仕様書との一致度**: 仕様逸脱の検出率
- **品質向上貢献度**: レビュー指摘による改善件数
- **開発効率への影響**: レビューサイクルタイム
- **知識共有効果**: レビューコメントの参照・活用度

### フィードバックループ
- 定期的なレビューガイドライン見直し（月次）
- 見逃しやすい問題パターンの特定と対策
- 開発チームからのフィードバック収集と反映

このガイドラインに従うことで、Claude Code は仕様書駆動開発プロセスを強力にサポートし、高品質なコードレビューを継続的に提供できます。